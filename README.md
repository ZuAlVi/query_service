# Проект на Django REST Framework

Этот проект представляет собой реализацию сервиса на Django REST Framework (DRF) для обработки запросов, отправки их на внешний сервер и хранения истории запросов и ответов.

## Возможности

- Отправка запросов с кадастровым номером, широтой и долготой
- Эмуляция отправки запроса на внешний сервер с задержкой до 60 секунд
- Генерация случайного ответа (true или false)
- Хранение истории запросов и ответов в базе данных
- Получение списка всех запросов
- Получение списка запросов по кадастровому номеру
- Проверка работоспособности сервера через эндпоинт /ping

## Установка

1. Клонируйте репозиторий:

```bash
git clone https://github.com/ZuAlVi/query_service.git
```

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv env

source env/bin/activate  # для Windows: env\Scripts\activate
```
3. Установите зависимости:

```bash
pip install -r requirements.txt
```

4. Создайте в корне проекта файл .env и заполните его необходимыми данными взяв за пример файл .env_example


5. Примените миграции для создания таблиц в базе данных:

```bash
python manage.py migrate
```

6. Создайте суперпользователя для административного интерфейса Django:

```bash
python manage.py createsuperuser
```
## Запуск

1. Запустите сервер Django:
```bash
python manage.py runserver
```
Дополнительный сервис для эмуляции внешнего сервера будет запущен автоматически.

## Эндпоинты

- POST /query/: отправить запрос с кадастровым номером, широтой и долготой
- POST /result/: обновить ответ для соответствующего запроса
- GET /history/: получить список всех запросов
- GET /history/<cadastral_number>/: получить список запросов по кадастровому номеру
- GET /ping/: проверить работоспособность сервера

## Административный интерфейс

Для доступа к административному интерфейсу Django перейдите по адресу http://localhost:8000/admin/ и авторизуйтесь с помощью созданного суперпользователя.

## Docker

Для развертывания проекта с помощью Docker, выполните следующие шаги:

1. Соберите образ Docker:

```bash
docker build -t project .
```
2. Запустите контейнер:

```bash
docker run -p 8000:8000 project
```

После этого сервис будет доступен по адресу http://localhost:8000/.